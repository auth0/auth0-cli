# Documentation at http://goreleaser.com
builds:
- main: ./cmd/auth0
  env:
  - CGO_ENABLED=0
  goarch:
  - amd64
  goos:
  - darwin
  - linux
  - windows
  binary: auth0
  ldflags:
      - -X github.com/auth0/auth0-cli/internal/buildinfo.Version={{.Version}}
      - -X github.com/auth0/auth0-cli/internal/buildinfo.Revision={{.Commit}}
      - -X github.com/auth0/auth0-cli/internal/buildinfo.BuildUser=goreleaser'
      - -X github.com/auth0/auth0-cli/internal/buildinfo.BuildDate={{.Date}}'
archives:
  - replacements:
      darwin: Darwin
      linux: Linux
      windows: Windows
      386: i386
      amd64: x86_64
    files:
      - none*
checksum:
  name_template: "checksums.txt"
snapshot:
  name_template: "{{ .Tag }}-SNAPSHOT-{{.ShortCommit}}"
changelog:
  sort: asc
  filters:
    exclude:
      - "^docs:"
      - "^test:"
brews:
  -
    name: auth0
    tap:
      owner: auth0
      name: homebrew-auth0-cli
    commit_author:
      name: auth0
      email: support@auth0.com
    homepage: https://cli.auth0.com
    description: Auth0 CLI
    install: |
        bin.install "auth0"

        (bash_completion/"auth0").write `#{bin}/auth0 completion bash`
        (fish_completion/"auth0.fish").write `#{bin}/auth0 completion fish`
        (zsh_completion/"_auth0").write `#{bin}/auth0 completion zsh`
    caveats: "Thanks for installing Auth0 CLI"
