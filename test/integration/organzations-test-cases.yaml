config:
  inherit-env: true

tests:
  auth0 orgs list:
    exit-code: 0
  create organization and check json output:
    command: auth0 orgs create --name integration-test-org-new --display "Integration Test Organization" --json --no-input
    exit-code: 0
    stdout:
      json:
        name: "integration-test-org-new"
        display_name: "Integration Test Organization"

  create organization and check table output:
    command: auth0 orgs create --name integration-test-org-new2 --display "Integration Test Organization2" --no-input
    exit-code: 0
    stdout:
      contains:
        - NAME              integration-test-org-new2
        - DISPLAY NAME      Integration Test Organization2

  create organization to use in other tests:
    command: ./test/integration/scripts/get-org-id.sh
    exit-code: 0

  show organization and check json output:
    command: auth0 orgs show $(cat ./test/integration/identifiers/org-id) --json
    exit-code: 0
    stdout:
      json:
        name: "integration-test-org-better"
        display_name: "Integration Test Better Organization"

  show organization and check table output:
    command: auth0 orgs show $(cat ./test/integration/identifiers/org-id)
    exit-code: 0
    stdout:
      contains:
        - NAME              integration-test-org-better
        - DISPLAY NAME      Integration Test Better Organization

  update organization:
    command: auth0 orgs update $(cat ./test/integration/identifiers/org-id) -d "Integration Test Updated Organization" -a "#00FFAA" -b "#AA1166" --json --no-input
    exit-code: 0
    stdout:
      json:
        name: "integration-test-org-better"
        display_name: "Integration Test Updated Organization"
        branding.colors.page_background: "#AA1166"
        branding.colors.primary: "#00FFAA"
